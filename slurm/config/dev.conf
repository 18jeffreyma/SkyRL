# ============================================================================
# SkyRL Development Configuration
# ============================================================================
# Small-scale configuration for testing and development.
# - 1 GPU node with 4 GPUs
# - 8 parallel agents maximum
# - Shorter time limits for fast iteration
# ============================================================================

# ----------------------------------------------------------------------------
# SLURM Partition Configuration
# ----------------------------------------------------------------------------
# Adjust these based on your cluster's partition names
GPU_PARTITION="gpu_test"
CPU_PARTITION="test"

# ----------------------------------------------------------------------------
# Resource Allocation
# ----------------------------------------------------------------------------

# GPU Training Job
GPU_NODES=1
GPUS_PER_NODE=4
TRAINING_CPUS=48
TRAINING_MEMORY="500G"

# CPU Runtime Job
CPUS_FOR_RUNTIME=64
RUNTIME_MEMORY="256G"

# Per-worker allocation (runtime containers)
CPUS_PER_WORKER=8
MEMORY_PER_WORKER="16G"

# Maximum parallel agents
MAX_PARALLEL_AGENTS=8

# ----------------------------------------------------------------------------
# Model Configuration
# ----------------------------------------------------------------------------
MODEL="Qwen/Qwen3-8B"
TP_SIZE=2
SP_SIZE=2

# ----------------------------------------------------------------------------
# Training Configuration
# ----------------------------------------------------------------------------
TRAIN_BATCH_SIZE=64
ROLLOUT_N=8
MAX_PROMPT_LENGTH=8000
MAX_RESPONSE_LENGTH=32768
TOTAL_EPOCHS=5

# ----------------------------------------------------------------------------
# Time Limits
# ----------------------------------------------------------------------------
TIME_LIMIT="04:00:00"

# Timeout for runtime ready signal (seconds)
RUNTIME_READY_TIMEOUT=600

# ----------------------------------------------------------------------------
# Data Paths
# ----------------------------------------------------------------------------
# Override these if your data is in a different location
DATA_DIR="/mnt/shared_storage/datasets/r2e-all"
TRAIN_DATA="${DATA_DIR}/train.parquet"
VAL_DATA="${DATA_DIR}/validation.parquet"

# ----------------------------------------------------------------------------
# Output Directories
# ----------------------------------------------------------------------------
CHECKPOINT_DIR="/mnt/local_storage/ckpts/skyrl-dev"
ROLLOUT_DIR="/mnt/local_storage/rollouts/skyrl-dev"

# ----------------------------------------------------------------------------
# Logging / Monitoring
# ----------------------------------------------------------------------------
WANDB_PROJECT="skyrl-dev"
WANDB_EXPERIMENT="skyrl-dev-test"

# Enable debug logging
SKYRL_DEBUG=1

# ----------------------------------------------------------------------------
# Container Configuration
# ----------------------------------------------------------------------------
CONTAINER_IMAGE="ghcr.io/opendevin/sandbox:main"
RUNTIME_PORT=8000
